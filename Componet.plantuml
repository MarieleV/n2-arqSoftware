@startuml

!include <c4/C4_Component.puml> 

LAYOUT_WITH_LEGEND()

title Diagrama de Component - VídeosON (VO) 2.0

Container(api_backend, "API Application", "Node.js (NestJS) ou Spring Boot", "Fornece funcionalidades da aplicação, como autenticação, controle de vídeos e assinaturas.")
ContainerDb(db, "Banco de Dados", "MySQL ou PostgreSQL", "Armazena informações dos usuários, vídeos, histórico e status da assinatura.")
Container(streaming_service, "Serviço de Streaming", "API do YouTube + CDN", "Entrega de vídeos com base em resolução e performance.")
Container(payments_service, "Serviço de Pagamento", "API externa (PayPal, Stripe)", "Processa assinaturas e pagamentos dos clientes.")

Container_Boundary(api, "API Application") {
    Component(auth_controller, "Autenticação Controller", "MVC Rest Controller", "Gerencia o login, registro de usuários e controle de sessões.")
    Component(videos_controller, "Vídeos Controller", "MVC Rest Controller", "Gerencia as operações de listagem, reprodução e verificação de vídeos.")
    Component(subscription_controller, "Assinatura Controller", "MVC Rest Controller", "Gerencia o controle de assinaturas e status de pagamento.")
    Component(payment_service, "Serviço de Pagamento", "Spring Bean", "Integra com os gateways de pagamento para processar assinaturas.")
    Component(streaming_facade, "Streaming Facade", "Spring Bean", "Facilita a comunicação com o serviço de streaming (YouTube + CDN).")
    
    Rel(auth_controller, db, "Lê e escreve dados de autenticação", "JDBC")
    Rel(videos_controller, db, "Lê dados dos vídeos", "JDBC")
    Rel(subscription_controller, db, "Lê e escreve status da assinatura", "JDBC")
    Rel(payment_service, payments_service, "Processa pagamentos", "HTTPS")
    Rel(streaming_facade, streaming_service, "Requisita vídeos", "HTTPS")
}

Rel(api_backend, auth_controller, "Usa", "JSON/HTTPS")
Rel(api_backend, videos_controller, "Usa", "JSON/HTTPS")
Rel(api_backend, subscription_controller, "Usa", "JSON/HTTPS")

@enduml
